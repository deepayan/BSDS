<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>A Sample Session in R</title>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css' integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm' crossorigin='anonymous'>
    <link rel='stylesheet' href='assets/remark.css'>
  </head>
  <body>
    <textarea id='source'>

class: center, middle

# A Sample Session in R

## Data Analysis with R and Python

### Deepayan Sarkar

<h1 onclick='document.documentElement.requestFullscreen();' style='cursor: pointer;'>
<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-arrows-fullscreen' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z'/>
</svg>
</h1>

---






# Starting and Interacting with R

* R is typically used interactively

* When we start R, the command window (or console) displays a prompt, typically `>`

* We use R by entering an expression to be evaluated

* R evaluates the expression and prints the result


``` r
1 + 2
```

```
[1] 3
```

* It then provides a new prompt and waits for more input


<div>
$$
\newcommand{\sub}{_}
$$
</div>



---

# Infix and Prefix Notation

* R uses **infix** notation for standard arithmetic operations, e.g., 

```r
1 + 2
```

--

* The corresponding **prefix** notation would look something like

```
+ 1 2
```

--

* This is actually what R does internally, using _function notation_


``` r
`+`(1, 2)
```

```
[1] 3
```

* In general, R expressions are typically function calls of the form `f(a, b)`

---

layout: true

# Basic principles: Data types

---

* R can handle may different kinds of data

* Basic classification: *simple data* and *compound data*

* **Simple Data** includes:

	* Numbers (numeric values, including integers and floating-point numbers):
```r
1     # an integer  
-3.14 # a floating point number
```
--

	*  Logical values:
```r
 TRUE # true  
FALSE # false (or T and F shortcuts)
```
--

	* Strings (enclosed in single or double quotes):
```r
"This is a string 1 2 3 4"
```

---

* **Compound Data** primarily consists of

	* **vectors** : ordered collections of elements of the same type
	
	* **lists** : ordered collections with elements of possibly different types

--
* We commonly define compound data using the concatenate function `c()`:

``` r
c(1, 2, 3)
```

```
[1] 1 2 3
```

---

* We can also have **Symbols** which are used for naming variables or functions:

```r
x  
gdp.data  
this_is_a_symbol
```

---

layout: false

# The REPL

* An R session involves interaction between the user and the console (_listener_)

* When we enter an expression, the listener passes it to the _evaluator_

--

* Basic rule:

	* Everything is evaluated

	* The results are (usually) printed
	
	* Once done, listener goes back to listening

--

<br/>

.center[

This is known as the __Read-Eval-Print-Loop__ or __REPL__

]

---

layout: true

# Evaluation rules

---

* Numbers and strings evaluate to themselves:


``` r
10
```

```
[1] 10
```

``` r
"Hello"  
```

```
[1] "Hello"
```

---

* Expressions can involve _functions_ 


``` r
sqrt(10)
```

```
[1] 3.162278
```

``` r
nchar("Hello")
```

```
[1] 5
```

--

* Functions are applied using parentheses

--

* Function name precedes arguments, mirroring **prefix** notation

	* For example ` min(x, y) ` instead of ` min x y `

	* Parentheses needed when number of arguments of functions are unknown
	
	* Compare ` min(pi, sqrt(10)) ` and ` min pi sqrt 10 `

---

* Evaluation can be **suppressed** by _quoting_ an expression


``` r
quote(min(pi, sqrt(10)))
```

```
min(pi, sqrt(10))
```

--

* This turns out to be a very interesting feature that we will return to later

* Python does **not** have a similar feature (R and Python are otherwise very similar)

---

layout: false

class: center middle

# Elementary Statistical Operations

Fundamental numerical and graphical statistical operations in R


---

layout: true

# Example dataset: World Social Indicators, 1960

---

.scrollable500[

country|gnppc|pctlit_adult|highered100k
-------|----:|-----------:|-----------:
Nepal|45|5|56
Afghanistan|50|2.5|12
Laos|50|17.5|4
Ethiopia|55|2.5|5
Burma|57|47.5|63
Libya|60|13|49
Sudan|60|9|34
Tanganyika|61|7.5|9
Uganda|64|27.5|14
Pakistan|70|13|165
China|73|47.5|69
India|73|19.3|220
South Vietnam|76|17.5|83
Nigeria|78|10|4
Kenya|87|22.5|5
Madagascar|88|33.5|21
Congo|92|37.5|4
Thailand|96|68|251
Bolivia|99|32.1|166
Cambodia|99|17.5|18

]

---

* Data from a small subset of countries

* All have relatively low per capita GDP

* Variables

	* `gnppc` : per capita GNP (around 1957), 

	* `pctlit_adult` : adult literacy (%) aoround 1960

	* `highered100k` : enrollment in higher education per 100,000 population

---

layout: true

# Simple univariate calculations

---

* Simplest statistical data: univariate

* Usually consists of groups of numbers

* We first consider only the data on enrolment in higher education, which are

```
56 12 4 5 63 49 34 9 14 165 69 220 83 4 5 21 4 251 166 18
```

--

* In R, we represent this data as a vector using `c()` (combine):


``` r
c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18)
```

```
 [1]  56  12   4   5  63  49  34   9  14 165  69 220  83   4   5  21   4 251 166
[20]  18
```

---

* The `mean()` function computes the average (**arithmetic mean**) of a vector of numbers.


``` r
mean(c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18))
```

```
[1] 62.6
```

--

* The **median** of these numbers can be calculated using `median()`:


``` r
median(c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18))
```

```
[1] 27.5
```

---

* This requires retyping the data every time

* We can avoid this by assigning it a _name_ to reference by

* Done using the assignment operator `<-` or the (mostly) equivalent `=` operator.


``` r
higher.educ <- c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18)
```

* This is known as a **variable assignment**

---

* The symbol `higher.educ` now holds the vector of 20 numbers

* If we evaluate the symbol, R returns its value.


``` r
higher.educ
```

```
 [1]  56  12   4   5  63  49  34   9  14 165  69 220  83   4   5  21   4 251 166
[20]  18
```

---

* We can easily compute numerical descriptive statistics.


``` r
mean(higher.educ)  
```

```
[1] 62.6
```

``` r
median(higher.educ)  
```

```
[1] 27.5
```

``` r
sd(higher.educ) # Standard deviation  
```

```
[1] 76.57222
```

``` r
IQR(higher.educ) # Interquartile range
```

```
[1] 64.5
```

---

layout: true

# Vectorized arithmetic

---

* R also supports **elementwise arithmetic operations** on vectors

* For example, we can add 1 to each value using


``` r
1 + higher.educ
```

```
 [1]  57  13   5   6  64  50  35  10  15 166  70 221  84   5   6  22   5 252 167
[20]  19
```

* We can calculate the natural logarithms of the values


``` r
log(higher.educ)
```

```
 [1] 4.025352 2.484907 1.386294 1.609438 4.143135 3.891820 3.526361 2.197225
 [9] 2.639057 5.105945 4.234107 5.393628 4.418841 1.386294 1.609438 3.044522
[17] 1.386294 5.525453 5.111988 2.890372
```

---

* Functions can be nested, as we have been doing


``` r
mean(log(higher.educ))
```

```
[1] 3.300523
```

``` r
median(log(higher.educ))
```

```
[1] 3.285441
```

---

* Expressions with simple nested functions can be written in _pipeline_ notation

* Sometimes easier to follow because order of application is left-to-right


``` r
higher.educ |> log() |> mean()
```

```
[1] 3.300523
```

``` r
higher.educ |> log() |> median()
```

```
[1] 3.285441
```

--



``` r
higher.educ |> log() |> mean() |> exp()
```

```
[1] 27.12684
```

``` r
higher.educ |> log() |> median() |> exp()
```

```
[1] 26.72078
```

---

layout: false

# Arithmetic Mean, Geometric Mean, and Median

* What does the following tell us about the data?


``` r
higher.educ |> mean() # arithmetic mean
```

```
[1] 62.6
```

``` r
higher.educ |> log() |> mean() |> exp() # geometric mean
```

```
[1] 27.12684
```

``` r
higher.educ |> median() # median
```

```
[1] 27.5
```

---

layout: false

# Another dataset: Average monthly PM 2.5 levels 

* Recorded at an air quality monitoring station in R.K.Puram (Delhi)

* Over a 3-year period, from January 2021 to December 2023.


``` r
pm25 <- c(288, 223, 167, 156, 126, 120, 102, 106, 83, 114, 259, 282, 
          234, 183, 174, 176, 160, 139, 102, 99, 110, 173, 245, 250, 260, 
          190, 150, 164, 161, 144, 115, 138, 123, 182, 323, 280)
```

---

# Some numerical summaries


``` r
mean(pm25)  
```

```
[1] 175.0278
```

``` r
median(pm25)  
```

```
[1] 162.5
```

``` r
sd(pm25)  
```

```
[1] 63.83796
```

``` r
IQR(pm25)
```

```
[1] 103.5
```

--

* Graphical summaries give better idea of distribution

---

# Histogram

* The function `hist()` draws a histogram of the data


``` r
hist(pm25) # Produces a histogram plot
```

![plot of chunk pm25-hist](figures/1-rsession-pm25-hist-1.svg)

---

# Five-Number Summary

* Standard quartiles + extreme values are useful to judge symmetry

* Useful to compare transformations


``` r
fivenum(pm25)
```

```
[1]  83.0 121.5 162.5 228.5 323.0
```

``` r
fivenum(sqrt(pm25))
```

```
[1]  9.110434 11.022494 12.747413 15.115122 17.972201
```

``` r
fivenum(log(pm25))
```

```
[1] 4.418841 4.799838 5.090635 5.431246 5.777652
```

---

# Box-and-Whisker Plot


``` r
par(mfrow = c(1, 3))
boxplot(pm25, main = "PM25")
boxplot(sqrt(pm25), main = "sqrt(PM25)")
boxplot(log(pm25), main = "log(PM25)")
```

![plot of chunk pm25-boxplot](figures/1-rsession-pm25-boxplot-1.svg)

---

layout: true

# Time Series Plots

---

* We often plot observations against time (or the order in which they were obtained)

* Helps to convey serial correlation or trend

--

* The `plot()` function creates a scatterplot of two variables

* To use it, we need a sequence of integers for the time variable

---

* Useful function that generates a sequence: `seq()` or the shorthand `:` operator


``` r
time <- 0:35  
plot(time, pm25)
```

![plot of chunk pm25-ts1](figures/1-rsession-pm25-ts1-1.svg)

---

* It is common to connect points by lines, using the `type` argument, to emphasize the trend


``` r
plot(time, pm25, type = "o") # "o" stands for 'overlay'
```

![plot of chunk pm25-ts2](figures/1-rsession-pm25-ts2-1.svg)

---

layout: true

# Scatter plots

---

* General scatter plots show points with coordinates given by two variables

* Very useful for examining the relationship between two numerical variables

--

* Recall: `higher.educ` from social indicators data

* Additionally define the `adult_lit` variable to contain corresponding adult literacy (%).


``` r
adult.lit <- c(5, 2.5, 17.5, 2.5, 47.5, 13, 9, 7.5, 27.5, 13, 47.5,
               19.3, 17.5, 10, 22.5, 33.5, 37.5, 68, 32.1, 17.5)
```

---

* Scatter plot of `higher.educ` against `adult.lit`



``` r
plot(adult.lit, higher.educ)
```

![plot of chunk pm25-alit-hieduc](figures/1-rsession-pm25-alit-hieduc-1.svg)

---

layout: true

# Plotting Functions

---

* Sometimes we are interested in plotting functions; e.g., plot $\sin(x)$ from $-\pi$ to $+\pi$


``` r
x_points <- seq(-pi, pi, length.out = 50) # equally spaced grid  
plot(x_points, sin(x_points), type = "l")
```

![plot of chunk unnamed-chunk-23](figures/1-rsession-unnamed-chunk-23-1.svg)

---

* It is also possible to plot functions (of one argument) directly


``` r
plot(sin, from = -2 * pi, to = 2 * pi)
```

![plot of chunk unnamed-chunk-24](figures/1-rsession-unnamed-chunk-24-1.svg)

---

We can alse define a new function to plot as follows (more details later).


``` r
f <- function(x) { 2 * x + 3 * x^2 - x^3 }
plot(f, from = -10, to = 10)
```

![plot of chunk unnamed-chunk-25](figures/1-rsession-unnamed-chunk-25-1.svg)





    </textarea>
  </body>

  <script 
	  src='assets/remark-latest.min.js'
	  type='text/javascript'></script>

  <script type='text/javascript'>
    var slideshow = remark.create(
	{
	    navigation: {scroll: false,},
	    ratio: '16:9',
	    // ratio: '4:3',
	    countIncrementalSlides: false
	});

    // Function to add copy buttons
    function addCopyButtons() {
      const codeBlocks = document.querySelectorAll('.remark-code');
      codeBlocks.forEach((codeBlock) => {
        const button = document.createElement('button');
        button.className = 'copy-button';
        button.textContent = 'Copy';
    
        button.addEventListener('click', () => {
          button.textContent = '';
          const code = codeBlock.innerText;
          navigator.clipboard.writeText(code).then(() => {
            button.textContent = 'Copied!';
            setTimeout(() => button.textContent = 'Copy', 2000);
          });
        });
    
        codeBlock.style.position = 'relative'; // Ensure button is positioned correctly
        codeBlock.appendChild(button);
      });
    }

    // Run after slide load
    window.onload = addCopyButtons;

    // Setup MathJax; unused if mathjax == false
    MathJax = {
	tex: {
	    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
	    displayMath: [ ['$$', '$$'], ['\\[', '\\]'] ]
	},
	svg: {
	    fontCache: 'global'
	},
    };

  </script>

  <script type='text/javascript' async
	  src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js'>
  </script>

</html>

