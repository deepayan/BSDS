---
layout: remark
title: A Sample Session in R
subtitle: Data Analysis with R and Python
author: Deepayan Sarkar
mathjax: true
---

```{r opts, echo = FALSE, results = "hide", warning = FALSE, message = FALSE}
opts_chunk$set(cache = TRUE, cache.path='~/knitr-cache/darp-r-session/', autodep = TRUE,
               comment = "", warning = TRUE, message = TRUE,
			   ## engine.path = list(python = "/usr/bin/python3"),
               fig.width = 15, fig.height = 7,
               dev = "svglite", dev.args = list(pointsize = 20),
               knitr.table.format = "html",
			   fig.path='figures/1-rsession-')
options(warnPartialMatchDollar = FALSE, width = 80)
```


# Starting and Interacting with R

* R is typically used interactively

* When we start R, the command window (or console) displays a prompt, typically `>`

* We use R by entering an expression to be evaluated

* R evaluates the expression and prints the result

```{r}
1 + 2
```

* It then provides a new prompt and waits for more input


<div>
$$
\newcommand{\sub}{_}
$$
</div>



---

# Infix and Prefix Notation

* R uses **infix** notation for standard arithmetic operations, e.g., 

```r
1 + 2
```

--

* The corresponding **prefix** notation would look something like

```
+ 1 2
```

--

* This is actually what R does internally, using _function notation_

```{r}
`+`(1, 2)
```

* In general, R expressions are typically function calls of the form `f(a, b)`

---

layout: true

# Basic principles: Data types

---

* R can handle may different kinds of data

* Basic classification: *simple data* and *compound data*

* **Simple Data** includes:

	* Numbers (numeric values, including integers and floating-point numbers):
```r
1     # an integer  
-3.14 # a floating point number
```
--

	*  Logical values:
```r
 TRUE # true  
FALSE # false (or T and F shortcuts)
```
--

	* Strings (enclosed in single or double quotes):
```r
"This is a string 1 2 3 4"
```

---

* **Compound Data** primarily consists of

	* **vectors** : ordered collections of elements of the same type
	
	* **lists** : ordered collections with elements of possibly different types

--
* We commonly define compound data using the concatenate function `c()`:
```{r}
c(1, 2, 3)
```

---

* We can also have **Symbols** which are used for naming variables or functions:

```r
x  
gdp.data  
this_is_a_symbol
```

---

layout: false

# The REPL

* An R session involves interaction between the user and the console (_listener_)

* When we enter an expression, the listener passes it to the _evaluator_

--

* Basic rule:

	* Everything is evaluated

	* The results are (usually) printed
	
	* Once done, listener goes back to listening

--

<br/>

.center[

This is known as the __Read-Eval-Print-Loop__ or __REPL__

]

---

layout: true

# Evaluation rules

---

* Numbers and strings evaluate to themselves:

```{r}
10
"Hello"  
```

---

* Expressions can involve _functions_ 

```{r}
sqrt(10)
nchar("Hello")
```

--

* Functions are applied using parentheses

--

* Function name precedes arguments, mirroring **prefix** notation

	* For example ` min(x, y) ` instead of ` min x y `

	* Parentheses needed when number of arguments of functions are unknown
	
	* Compare ` min(pi, sqrt(10)) ` and ` min pi sqrt 10 `

---

* Evaluation can be **suppressed** by _quoting_ an expression

```{r}
quote(min(pi, sqrt(10)))
```

--

* This turns out to be a very interesting feature that we will return to later

* Python does **not** have a similar feature (R and Python are otherwise very similar)

---

layout: false

class: center middle

# Elementary Statistical Operations

Fundamental numerical and graphical statistical operations in R


---

layout: true

# Example dataset: World Social Indicators, 1960

---

.scrollable500[

country|gnppc|pctlit_adult|highered100k
-------|----:|-----------:|-----------:
Nepal|45|5|56
Afghanistan|50|2.5|12
Laos|50|17.5|4
Ethiopia|55|2.5|5
Burma|57|47.5|63
Libya|60|13|49
Sudan|60|9|34
Tanganyika|61|7.5|9
Uganda|64|27.5|14
Pakistan|70|13|165
China|73|47.5|69
India|73|19.3|220
South Vietnam|76|17.5|83
Nigeria|78|10|4
Kenya|87|22.5|5
Madagascar|88|33.5|21
Congo|92|37.5|4
Thailand|96|68|251
Bolivia|99|32.1|166
Cambodia|99|17.5|18

]

---

* Data from a small subset of countries

* All have relatively low per capita GDP

* Variables

	* `gnppc` : per capita GNP (around 1957), 

	* `pctlit_adult` : adult literacy (%) aoround 1960

	* `highered100k` : enrollment in higher education per 100,000 population

---

layout: true

# Simple univariate calculations

---

* Simplest statistical data: univariate

* Usually consists of groups of numbers

* We first consider only the data on enrolment in higher education, which are

```
56 12 4 5 63 49 34 9 14 165 69 220 83 4 5 21 4 251 166 18
```

--

* In R, we represent this data as a vector using `c()` (combine):

```{r}
c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18)
```

---

* The `mean()` function computes the average (**arithmetic mean**) of a vector of numbers.

```{r}
mean(c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18))
```

--

* The **median** of these numbers can be calculated using `median()`:

```{r}
median(c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18))
```

---

* This requires retyping the data every time

* We can avoid this by assigning it a _name_ to reference by

* Done using the assignment operator `<-` or the (mostly) equivalent `=` operator.

```{r}
higher.educ <- c(56, 12, 4, 5, 63, 49, 34, 9, 14, 165, 69, 220, 83, 4, 5, 21, 4, 251, 166, 18)
```

* This is known as a **variable assignment**

---

* The symbol `higher.educ` now holds the vector of 20 numbers

* If we evaluate the symbol, R returns its value.

```{r}
higher.educ
```

---

* We can easily compute numerical descriptive statistics.

```{r}
mean(higher.educ)  
median(higher.educ)  
sd(higher.educ) # Standard deviation  
IQR(higher.educ) # Interquartile range
```

---

layout: true

# Vectorized arithmetic

---

* R also supports **elementwise arithmetic operations** on vectors

* For example, we can add 1 to each value using

```{r}
1 + higher.educ
```

* We can calculate the natural logarithms of the values

```{r}
log(higher.educ)
```

---

* Functions can be nested, as we have been doing

```{r}
mean(log(higher.educ))
median(log(higher.educ))
```

---

* Expressions with simple nested functions can be written in _pipeline_ notation

* Sometimes easier to follow because order of application is left-to-right

```{r}
higher.educ |> log() |> mean()
higher.educ |> log() |> median()
```

--


```{r}
higher.educ |> log() |> mean() |> exp()
higher.educ |> log() |> median() |> exp()
```

---

layout: false

# Arithmetic Mean, Geometric Mean, and Median

* What does the following tell us about the data?

```{r}
higher.educ |> mean() # arithmetic mean
higher.educ |> log() |> mean() |> exp() # geometric mean
higher.educ |> median() # median
```

---

layout: false

# Another dataset: Average monthly PM 2.5 levels 

* Recorded at an air quality monitoring station in R.K.Puram (Delhi)

* Over a 3-year period, from January 2021 to December 2023.

```{r}
pm25 <- c(288, 223, 167, 156, 126, 120, 102, 106, 83, 114, 259, 282, 
          234, 183, 174, 176, 160, 139, 102, 99, 110, 173, 245, 250, 260, 
          190, 150, 164, 161, 144, 115, 138, 123, 182, 323, 280)
```

---

# Some numerical summaries

```{r}
mean(pm25)  
median(pm25)  
sd(pm25)  
IQR(pm25)
```

--

* Graphical summaries give better idea of distribution

---

# Histogram

* The function `hist()` draws a histogram of the data

```{r pm25-hist}
hist(pm25) # Produces a histogram plot
```

---

# Five-Number Summary

* Standard quartiles + extreme values are useful to judge symmetry

* Useful to compare transformations

```{r}
fivenum(pm25)
fivenum(sqrt(pm25))
fivenum(log(pm25))
```

---

# Box-and-Whisker Plot

```{r pm25-boxplot}
par(mfrow = c(1, 3))
boxplot(pm25, main = "PM25")
boxplot(sqrt(pm25), main = "sqrt(PM25)")
boxplot(log(pm25), main = "log(PM25)")
```

---

layout: true

# Time Series Plots

---

* We often plot observations against time (or the order in which they were obtained)

* Helps to convey serial correlation or trend

--

* The `plot()` function creates a scatterplot of two variables

* To use it, we need a sequence of integers for the time variable

---

* Useful function that generates a sequence: `seq()` or the shorthand `:` operator

```{r pm25-ts1}
time <- 0:35  
plot(time, pm25)
```

---

* It is common to connect points by lines, using the `type` argument, to emphasize the trend

```{r pm25-ts2}
plot(time, pm25, type = "o") # "o" stands for 'overlay'
```

---

layout: true

# Scatter plots

---

* General scatter plots show points with coordinates given by two variables

* Very useful for examining the relationship between two numerical variables

--

* Recall: `higher.educ` from social indicators data

* Additionally define the `adult_lit` variable to contain corresponding adult literacy (%).

```{r}
adult.lit <- c(5, 2.5, 17.5, 2.5, 47.5, 13, 9, 7.5, 27.5, 13, 47.5,
               19.3, 17.5, 10, 22.5, 33.5, 37.5, 68, 32.1, 17.5)
```

---

* Scatter plot of `higher.educ` against `adult.lit`


```{r pm25-alit-hieduc}
plot(adult.lit, higher.educ)
```


